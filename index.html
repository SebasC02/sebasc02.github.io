<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprende sobre el Daltonismo - Una Aventura de Colores</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Skip to main content para accesibilidad -->
    <a href="#main-content" class="skip-link">Saltar al contenido principal</a>

    <!-- Formas flotantes decorativas -->
    <div class="floating-shapes" aria-hidden="true">
        <div class="shape shape-1">‚≠ê</div>
        <div class="shape shape-2">üé®</div>
        <div class="shape shape-3">üåà</div>
        <div class="shape shape-4">‚ú®</div>
        <div class="shape shape-5">üéà</div>
    </div>

    <!-- Indicador de Sonido -->
    <button id="sound-indicator" class="sound-indicator" aria-label="Activar o desactivar sonido. Sonido actualmente encendido" aria-pressed="true">
        üîä Sonido: ON
    </button>

    <!-- Contador de Logros -->
    <button id="achievements-badge" class="achievements-badge" aria-label="Ver tus logros obtenidos">
        <span class="badge-icon" aria-hidden="true">üèÜ</span>
        <span id="achievement-count">0</span> Logros
    </button>

    <!-- Modal de Recompensa -->
    <div id="reward-modal" class="reward-modal" role="dialog" aria-labelledby="reward-title" aria-modal="true" aria-hidden="true">
        <div class="reward-content">
            <div class="reward-icon" id="reward-icon" aria-hidden="true">üéâ</div>
            <h2 class="reward-title" id="reward-title">¬°Excelente Trabajo!</h2>
            <p class="reward-message" id="reward-message">¬°Has ganado una estrella!</p>
            <div class="reward-stars" id="reward-stars" aria-hidden="true"></div>
            <button id="btn-close-reward" class="btn-primary">¬°Continuar!</button>
        </div>
    </div>

    <!-- Barra de Accesibilidad -->
    <nav id="accessibility-bar" class="accessibility-bar" role="toolbar" aria-label="Herramientas de accesibilidad y navegaci√≥n">
        <!-- Bot√≥n de navegaci√≥n/regresar -->
        <button id="btn-back-nav" class="nav-button" aria-label="Regresar a la pantalla anterior" title="Regresar" style="display: none;">
            ‚Üê Regresar
        </button>
        
        <!-- Botones de accesibilidad -->
        <button id="btn-increase-font" aria-label="Aumentar tama√±o de texto" title="Aumentar tama√±o de texto">A+</button>
        <button id="btn-decrease-font" aria-label="Disminuir tama√±o de texto" title="Disminuir tama√±o de texto">A-</button>
        <button id="btn-high-contrast" aria-label="Activar o desactivar alto contraste" title="Alto contraste">Contraste</button>
        <button id="btn-reset-settings" aria-label="Restablecer configuraci√≥n de accesibilidad" title="Restablecer">Restablecer</button>
        
        <!-- Selectores r√°pidos de tipo de daltonismo -->
        <div class="colorblind-quick-selector" role="radiogroup" aria-label="Cambio r√°pido de tipo de daltonismo">
            <button id="quick-normal" class="quick-selector-btn active" data-type="normal" aria-label="Visi√≥n normal" aria-pressed="true" title="Visi√≥n Normal">
                Normal
            </button>
            <button id="quick-protanopia" class="quick-selector-btn" data-type="protanopia" aria-label="Protanop√≠a - Dificultad con el rojo" aria-pressed="false" title="Protanop√≠a">
                Protanop√≠a
            </button>
            <button id="quick-deuteranopia" class="quick-selector-btn" data-type="deuteranopia" aria-label="Deuteranop√≠a - Dificultad con el verde" aria-pressed="false" title="Deuteranop√≠a">
                Deuteranop√≠a
            </button>
            <button id="quick-tritanopia" class="quick-selector-btn" data-type="tritanopia" aria-label="Tritanop√≠a - Dificultad con el azul" aria-pressed="false" title="Tritanop√≠a">
                Tritanop√≠a
            </button>
        </div>
    </nav>

    <!-- Mascota -->
    <button id="mascot" class="mascot" role="button" aria-label="Color√≠n, tu amigo gu√≠a. Haz clic para recibir mensajes de ayuda" tabindex="0">
        <div class="mascot-body" aria-hidden="true">
            <div class="mascot-eye left"></div>
            <div class="mascot-eye right"></div>
            <div class="mascot-mouth"></div>
        </div>
        <div id="mascot-message" class="mascot-message" role="status" aria-live="polite" aria-atomic="true"></div>
    </button>

    <!-- Pantalla de Bienvenida -->
    <section id="welcome-screen" class="screen active" role="main" aria-labelledby="welcome-title">
        <div id="main-content" tabindex="-1">
            <h1 id="welcome-title">¬°Bienvenido a la Aventura de los Colores!</h1>
            <div class="welcome-content">
                <p>Hola, soy <strong>Color√≠n</strong>, tu amigo gu√≠a. Juntos vamos a descubrir c√≥mo ves los colores.</p>
                <p>¬øEst√°s listo para comenzar?</p>
                
                <div class="welcome-buttons">
                    <button id="btn-start-test" class="btn-primary">¬°Comenzar la Aventura!</button>
                    <button id="btn-user-manual" class="btn-secondary">üìñ Manual de Usuario</button>
                    <button id="btn-parent-info" class="btn-secondary">Informaci√≥n para Padres</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Manual de Usuario -->
    <section id="user-manual-screen" class="screen" role="main" aria-labelledby="manual-title">
        <h1 id="manual-title">üìñ Manual de Usuario</h1>
        <div class="manual-content">
            <article>
                <h2>C√≥mo Usar Esta Aplicaci√≥n</h2>
                <p>Esta aplicaci√≥n est√° dise√±ada para ayudarte a aprender sobre el daltonismo de forma divertida e interactiva. Aqu√≠ te explicamos c√≥mo funciona:</p>

                <h3>üéÆ Navegaci√≥n por Teclado</h3>
                <ul>
                    <li><strong>Tecla TAB:</strong> Navega entre los botones y elementos interactivos.</li>
                    <li><strong>Tecla ENTER o ESPACIO:</strong> Activa el bot√≥n seleccionado.</li>
                    <li><strong>Flechas del teclado:</strong> Navega en juegos y opciones.</li>
                    <li><strong>Tecla ESC:</strong> Regresa al men√∫ principal desde cualquier pantalla.</li>
                </ul>

                <h3>üîß Barra de Herramientas Superior</h3>
                <ul>
                    <li><strong>Bot√≥n "‚Üê Regresar":</strong> Te lleva a la pantalla anterior.</li>
                    <li><strong>A+ / A-:</strong> Aumenta o disminuye el tama√±o del texto.</li>
                    <li><strong>Contraste:</strong> Activa el modo de alto contraste para mejor visibilidad.</li>
                    <li><strong>Restablecer:</strong> Vuelve todas las configuraciones a su estado original.</li>
                    <li><strong>Botones de tipo de daltonismo:</strong> Cambia r√°pidamente entre Normal, Protanop√≠a, Deuteranop√≠a y Tritanop√≠a.</li>
                </ul>

                <h3>üéØ El Test Inicial</h3>
                <p>Al comenzar la aventura, puedes:</p>
                <ul>
                    <li><strong>Realizar el test completo:</strong> 7 preguntas para detectar tu tipo de daltonismo.</li>
                    <li><strong>Saltar el test:</strong> Si ya conoces tu tipo de daltonismo, puedes saltarlo y configurarlo manualmente.</li>
                </ul>

                <h3>üé® Adaptaci√≥n de Colores</h3>
                <p>La aplicaci√≥n adapta todos sus colores seg√∫n el tipo de daltonismo seleccionado. Cada tipo tiene una paleta de colores optimizada:</p>
                <ul>
                    <li><strong>Visi√≥n Normal:</strong> Colores est√°ndar vibrantes.</li>
                    <li><strong>Protanop√≠a:</strong> Colores optimizados para dificultad con el rojo.</li>
                    <li><strong>Deuteranop√≠a:</strong> Colores optimizados para dificultad con el verde.</li>
                    <li><strong>Tritanop√≠a:</strong> Colores optimizados para dificultad con el azul.</li>
                </ul>

                <h3>üé≤ Los Juegos</h3>
                <p>Tres juegos educativos que se adaptan a tu tipo de daltonismo:</p>
                <ul>
                    <li><strong>Encuentra el Color:</strong> Identifica el cuadro de color diferente.</li>
                    <li><strong>Memoria de Formas:</strong> Encuentra parejas de formas iguales.</li>
                    <li><strong>Detective de Patrones:</strong> Encuentra el patr√≥n diferente (rayas, puntos, n√∫meros, etc.).</li>
                </ul>

                <h3>üèÜ Sistema de Recompensas</h3>
                <ul>
                    <li>Gana estrellas al completar actividades.</li>
                    <li>Escucha sonidos de celebraci√≥n cuando logres objetivos.</li>
                    <li>Ve tus logros acumulados en el contador superior izquierdo.</li>
                </ul>

                <h3>üëÇ Accesibilidad para Lectores de Pantalla</h3>
                <ul>
                    <li>Todas las im√°genes tienen descripciones alternativas.</li>
                    <li>Los botones y elementos interactivos tienen etiquetas claras.</li>
                    <li>Las ventanas emergentes se anuncian correctamente.</li>
                    <li>El contenido se lee en orden l√≥gico.</li>
                </ul>

                <h3>ü¶∏ Tu Amigo Color√≠n</h3>
                <p>Color√≠n, la mascota en la esquina inferior derecha, te guiar√° durante toda la experiencia. Haz clic en √©l para recibir mensajes de √°nimo y consejos.</p>

                <h3>üîä Control de Sonido</h3>
                <p>Usa el bot√≥n de sonido en la esquina superior derecha para activar o desactivar los efectos sonoros.</p>
            </article>
            <button id="btn-back-from-manual" class="btn-primary">Volver al Inicio</button>
        </div>
    </section>

    <!-- Opciones de Inicio del Test -->
    <section id="test-options-screen" class="screen" role="main" aria-labelledby="test-options-title">
        <h1 id="test-options-title">¬øC√≥mo Quieres Continuar?</h1>
        <div class="test-options-content">
            <p>Puedes realizar el test para descubrir tu tipo de daltonismo, o si ya lo conoces, puedes configurarlo directamente.</p>
            
            <div class="options-grid">
                <button id="btn-take-test" class="option-card">
                    <span class="option-icon" aria-hidden="true">üß™</span>
                    <span class="option-title">Realizar el Test</span>
                    <span class="option-description">7 preguntas interactivas para descubrir c√≥mo ves los colores</span>
                </button>
                
                <button id="btn-skip-test" class="option-card">
                    <span class="option-icon" aria-hidden="true">‚ö°</span>
                    <span class="option-title">Saltar el Test</span>
                    <span class="option-description">Ya conozco mi tipo de daltonismo y quiero configurarlo directamente</span>
                </button>
            </div>
        </div>
    </section>

    <!-- Test de Daltonismo -->
    <section id="test-screen" class="screen" role="main" aria-labelledby="test-title">
        <h1 id="test-title">Test de Percepci√≥n de Colores</h1>
        <div class="test-content">
            <p id="test-instruction">Observa la imagen y dime qu√© n√∫mero ves:</p>
            <div class="keyboard-help" role="note" aria-label="Ayuda de navegaci√≥n por teclado">
                <span>‚å®Ô∏è <strong>Navega:</strong> TAB o Flechas</span>
                <span>‚úì <strong>Seleccionar:</strong> ENTER o ESPACIO</span>
            </div>
            <div class="test-image-container">
                <img id="test-image" src="" alt="Imagen de prueba de daltonismo con c√≠rculos de colores formando un n√∫mero" />
            </div>
            <div class="test-options" role="radiogroup" aria-labelledby="test-instruction">
                <button class="test-option" data-answer="1" aria-label="Opci√≥n 1">1</button>
                <button class="test-option" data-answer="2" aria-label="Opci√≥n 2">2</button>
                <button class="test-option" data-answer="3" aria-label="Opci√≥n 3">3</button>
                <button class="test-option" data-answer="4" aria-label="Opci√≥n 4">4</button>
            </div>
            <div class="test-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="7" aria-label="Progreso del test">
                <span id="test-progress-text">Pregunta <span id="current-question">1</span> de 7</span>
            </div>
        </div>
    </section>

    <!-- Resultados del Test -->
    <section id="results-screen" class="screen" role="main" aria-labelledby="results-title">
        <h1 id="results-title">¬°Descubrimos tu forma de ver los colores!</h1>
        <div class="results-content">
            <div id="result-message" role="status" aria-live="polite"></div>
            <p>Hemos detectado que podr√≠as tener: <strong id="detected-type">Visi√≥n Normal</strong></p>
            <p>Pero t√∫ eres quien mejor conoce c√≥mo ves. ¬øQuieres probar otro tipo?</p>
            
            <fieldset class="colorblind-selector" aria-label="Selecciona tu tipo de daltonismo">
                <legend class="sr-only">Opciones de tipo de daltonismo</legend>
                <label class="selector-option">
                    <input type="radio" name="colorblind-type" value="normal" />
                    <span>Visi√≥n Normal</span>
                </label>
                <label class="selector-option">
                    <input type="radio" name="colorblind-type" value="protanopia" />
                    <span>Protanop√≠a (Dificultad con el rojo)</span>
                </label>
                <label class="selector-option">
                    <input type="radio" name="colorblind-type" value="deuteranopia" />
                    <span>Deuteranop√≠a (Dificultad con el verde)</span>
                </label>
                <label class="selector-option">
                    <input type="radio" name="colorblind-type" value="tritanopia" />
                    <span>Tritanop√≠a (Dificultad con el azul)</span>
                </label>
            </fieldset>

            <!-- Vista Previa de Adaptaci√≥n -->
            <div class="preview-section">
                <h3>Vista Previa de C√≥mo Ver√°s la Aplicaci√≥n:</h3>
                <div id="preview-container" class="preview-container" role="img" aria-label="Vista previa de colores adaptados">
                    <div class="preview-item">
                        <div class="preview-box" id="preview-primary" aria-hidden="true"></div>
                        <span>Color Principal</span>
                    </div>
                    <div class="preview-item">
                        <div class="preview-box" id="preview-secondary" aria-hidden="true"></div>
                        <span>Color Secundario</span>
                    </div>
                    <div class="preview-item">
                        <div class="preview-box" id="preview-accent" aria-hidden="true"></div>
                        <span>Color de √ânfasis</span>
                    </div>
                </div>
                <p class="preview-description" id="preview-description" aria-live="polite">Selecciona un tipo para ver c√≥mo se adaptar√° la aplicaci√≥n</p>
            </div>

            <button id="btn-confirm-type" class="btn-primary">Continuar con esta opci√≥n</button>
        </div>
    </section>

    <!-- Men√∫ Principal -->
    <section id="main-menu" class="screen" role="main" aria-labelledby="menu-title">
        <h1 id="menu-title">¬øQu√© quieres hacer hoy?</h1>
        <nav class="menu-grid" aria-label="Men√∫ principal de actividades">
            <button id="btn-game-colors" class="menu-card" aria-label="Jugar: Encuentra el color diferente">
                <span class="menu-icon" aria-hidden="true">üé®</span>
                <span class="menu-title">Encuentra el Color</span>
            </button>
            <button id="btn-game-memory" class="menu-card" aria-label="Jugar: Memoria de formas">
                <span class="menu-icon" aria-hidden="true">üß©</span>
                <span class="menu-title">Memoria de Formas</span>
            </button>
            <button id="btn-game-patterns" class="menu-card" aria-label="Jugar: Detective de Patrones">
                <span class="menu-icon" aria-hidden="true">üîç</span>
                <span class="menu-title">Detective de Patrones</span>
            </button>
            <button id="btn-learn" class="menu-card" aria-label="Aprende sobre el daltonismo">
                <span class="menu-icon" aria-hidden="true">üìö</span>
                <span class="menu-title">Aprende M√°s</span>
            </button>
            <button id="btn-manual-menu" class="menu-card" aria-label="Ver manual de usuario">
                <span class="menu-icon" aria-hidden="true">üìñ</span>
                <span class="menu-title">Manual de Usuario</span>
            </button>
            <button id="btn-change-type" class="menu-card" aria-label="Cambiar tipo de daltonismo configurado">
                <span class="menu-icon" aria-hidden="true">‚öôÔ∏è</span>
                <span class="menu-title">Cambiar Configuraci√≥n</span>
            </button>
        </nav>
    </section>

    <!-- Juego: Encuentra el Color -->
    <section id="game-colors-screen" class="screen" role="main" aria-labelledby="game-colors-title">
        <h1 id="game-colors-title">Encuentra el Color Diferente</h1>
        <div class="game-content">
            <p>Encuentra el cuadro que es diferente a los dem√°s:</p>
            <div class="keyboard-help" role="note" aria-label="Ayuda de navegaci√≥n por teclado">
                <span>‚å®Ô∏è <strong>Navega:</strong> TAB o Flechas</span>
                <span>‚úì <strong>Seleccionar:</strong> ENTER o ESPACIO</span>
            </div>
            <div id="color-game-grid" class="color-game-grid" role="list" aria-label="Cuadr√≠cula de colores. Usa Tab y Enter para seleccionar"></div>
            <div class="game-score" role="status" aria-live="polite">
                <span>Puntos: <strong id="game-score">0</strong></span>
                <span>Nivel: <strong id="game-level">1</strong></span>
            </div>
            <button id="btn-back-menu-1" class="btn-secondary">Volver al Men√∫</button>
        </div>
    </section>

    <!-- Juego: Memoria -->
    <section id="game-memory-screen" class="screen" role="main" aria-labelledby="game-memory-title">
        <h1 id="game-memory-title">Memoria de Formas</h1>
        <div class="game-content">
            <p>Encuentra las parejas de formas iguales:</p>
            <div class="keyboard-help" role="note" aria-label="Ayuda de navegaci√≥n por teclado">
                <span>‚å®Ô∏è <strong>Navega:</strong> TAB o Flechas</span>
                <span>‚úì <strong>Voltear carta:</strong> ENTER o ESPACIO</span>
            </div>
            <div id="memory-game-grid" class="memory-game-grid" role="list" aria-label="Cuadr√≠cula de memoria. Usa Tab y Enter para voltear cartas"></div>
            <div class="game-score" role="status" aria-live="polite">
                <span>Movimientos: <strong id="memory-moves">0</strong></span>
                <span>Parejas: <strong id="memory-pairs">0</strong> / 6</span>
            </div>
            <button id="btn-reset-memory" class="btn-secondary">Reiniciar</button>
            <button id="btn-back-menu-2" class="btn-secondary">Volver al Men√∫</button>
        </div>
    </section>

    <!-- Juego: Detective de Patrones -->
    <section id="game-patterns-screen" class="screen" role="main" aria-labelledby="game-patterns-title">
        <h1 id="game-patterns-title">Detective de Patrones</h1>
        <div class="game-content">
            <div class="pattern-instructions">
                <p id="pattern-instruction">Encuentra el patr√≥n que es diferente a los dem√°s</p>
                <div class="keyboard-help" role="note" aria-label="Ayuda de navegaci√≥n por teclado">
                    <span>‚å®Ô∏è <strong>Navega:</strong> TAB o Flechas</span>
                    <span>‚úì <strong>Seleccionar:</strong> ENTER o ESPACIO</span>
                </div>
                <div class="pattern-info" role="status" aria-live="polite">
                    <span>Nivel: <strong id="pattern-level">1</strong></span>
                    <span>Puntos: <strong id="pattern-score">0</strong></span>
                    <span>Tipo: <strong id="pattern-type">-</strong></span>
                </div>
            </div>
            <div id="pattern-game-grid" class="pattern-game-grid" role="list" aria-label="Cuadr√≠cula de patrones. Usa Tab y Enter para seleccionar"></div>
            <button id="btn-back-menu-4" class="btn-secondary">Volver al Men√∫</button>
        </div>
    </section>

    <!-- Pantalla Educativa -->
    <section id="learn-screen" class="screen" role="main" aria-labelledby="learn-title">
        <h1 id="learn-title">Aprende sobre el Daltonismo</h1>
        <div class="learn-content">
            <article>
                <h2>¬øQu√© es el Daltonismo?</h2>
                <p>El daltonismo es una condici√≥n que hace que algunas personas vean los colores de manera diferente. ¬°No es malo, solo es diferente!</p>
                
                <h3>Tipos de Daltonismo:</h3>
                <ul>
                    <li><strong>Protanop√≠a:</strong> Dificultad para ver el color rojo.</li>
                    <li><strong>Deuteranop√≠a:</strong> Dificultad para ver el color verde.</li>
                    <li><strong>Tritanop√≠a:</strong> Dificultad para ver el color azul.</li>
                </ul>

                <h3>Consejos para el D√≠a a D√≠a:</h3>
                <ul>
                    <li>Usa etiquetas con nombres de colores en tus cosas.</li>
                    <li>Pide ayuda cuando necesites combinar colores.</li>
                    <li>Aprende a reconocer objetos por su forma, no solo por su color.</li>
                    <li>¬°Recuerda que eres especial tal como eres!</li>
                </ul>
            </article>
            <button id="btn-back-menu-3" class="btn-primary">Volver al Men√∫</button>
        </div>
    </section>

    <!-- Informaci√≥n para Padres -->
    <section id="parent-info-screen" class="screen" role="main" aria-labelledby="parent-title">
        <h1 id="parent-title">Informaci√≥n para Padres</h1>
        <div class="parent-content">
            <article>
                <h2>Comprendiendo el Daltonismo en Ni√±os</h2>
                <p>El daltonismo es una deficiencia en la percepci√≥n del color que afecta aproximadamente al 8% de los ni√±os y al 0.5% de las ni√±as. Es importante detectarlo temprano para ayudar a su hijo a adaptarse.</p>

                <h3>Signos de Daltonismo:</h3>
                <ul>
                    <li>Dificultad para distinguir entre rojo y verde, o azul y amarillo</li>
                    <li>Problemas para identificar colores en dibujos o juegos</li>
                    <li>Uso incorrecto de nombres de colores</li>
                    <li>Dificultad con tareas escolares relacionadas con colores</li>
                </ul>

                <h3>C√≥mo Ayudar a su Hijo:</h3>
                <ul>
                    <li><strong>Educaci√≥n:</strong> Ense√±e a su hijo sobre su condici√≥n de manera positiva.</li>
                    <li><strong>Comunicaci√≥n:</strong> Informe a maestros y cuidadores sobre el daltonismo.</li>
                    <li><strong>Herramientas:</strong> Use etiquetas, organizadores con formas, y aplicaciones de ayuda.</li>
                    <li><strong>Apoyo emocional:</strong> Refuerce que el daltonismo no limita sus capacidades.</li>
                    <li><strong>Consulta m√©dica:</strong> Visite a un oftalm√≥logo para un diagn√≥stico profesional.</li>
                </ul>

                <h3>Adaptaciones en el Hogar y Escuela:</h3>
                <ul>
                    <li>Organice la ropa con etiquetas escritas</li>
                    <li>Use marcadores con nombres de colores</li>
                    <li>Solicite materiales educativos con alto contraste</li>
                    <li>Ense√±e estrategias alternativas para identificar objetos</li>
                </ul>

                <h3>Recursos Adicionales:</h3>
                <p>Consulte con profesionales de la salud visual y busque grupos de apoyo para familias con ni√±os dalt√≥nicos.</p>
            </article>
            <button id="btn-back-welcome" class="btn-primary">Volver al Inicio</button>
        </div>
    </section>

    <!-- Indicador de Navegaci√≥n por Flechas -->
    <div id="arrow-nav-help" class="arrow-nav-help" role="status" aria-live="polite">
        <div class="arrow-nav-help-content">
            <span class="arrow-nav-icon" aria-hidden="true">‚å®Ô∏è</span>
            <span class="arrow-nav-text">
                Navega con flechas: <strong>‚Üë‚Üì‚Üê‚Üí</strong> ‚Ä¢ Activa con <strong>ENTER</strong>
            </span>
        </div>
    </div>

    <script src="javascript.js"></script>
</body>
</html>